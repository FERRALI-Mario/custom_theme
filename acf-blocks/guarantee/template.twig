{% set icons = {
  'secure-payment': "<i class='fa-solid fa-lock'></i>",
  'fast-delivery': "<i class='fa-solid fa-truck-fast'></i>",
  'contact': "<i class='fa-solid fa-phone'></i>",
  'click-collect': "<i class='fa-solid fa-shop'></i>",
  'free-shipping': "<i class='fa-solid fa-hand-holding-dollar'></i>",
  'customer-support': "<i class='fa-solid fa-headset'></i>",
  'warranty': "<i class='fa-solid fa-shield-halved'></i>"
} %}

{% set items = (fields.guarantees ?? [])|slice(0, 4) %}
{% set count = items|length %}
{% set colsLg = count == 3 ? 'lg:grid-cols-3' : 'lg:grid-cols-4' %}

<section class="py-12 lg:py-16 bg-gray-50">
	<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
		<div class="grid gap-6 sm:gap-7 grid-cols-1 sm:grid-cols-2 {{ colsLg }} place-items-center">
			{% for item in items %}
				<article
					class="w-full max-w-[320px] rounded-xl bg-white ring-1 ring-black/5 shadow-sm px-6 py-7 text-center">

					{# Boîte icône normalisée (mêmes dimensions pour FA et image) #}
					<div class="mx-auto mb-4 h-[50px] w-[50px] flex items-center justify-center">
						{% if item.icon_type == 'custom' and item.custom_icon %}
							<img src="{{ item.custom_icon.url }}" alt="{{ (item.title ?? '')|e }}" class="h-full w-full object-contain" loading="lazy" decoding="async">
						{% else %}
							{# FA hérite de la taille via text-* (pas de fa-xl) #}
							<span class="text-primary leading-none text-4xl sm:text-5xl">
								{{ icons[item.icon_type]|default('')|raw }}
							</span>
						{% endif %}
					</div>

					{% if item.title %}
						<h3 class="font-semibold text-base sm:text-lg md:text-[1.0625rem] text-gray-900">
							{{ item.title }}
						</h3>
					{% endif %}

					{% if item.description %}
						<p class="mt-2 text-gray-600 text-sm md:text-[0.9375rem] leading-6">
							{{ item.description }}
						</p>
					{% endif %}
				</article>
			{% endfor %}
		</div>
	</div>
</section>
