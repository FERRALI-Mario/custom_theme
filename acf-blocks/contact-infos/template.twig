<section class="contact-infos py-16 md:py-24 px-4">
	<div class="container mx-auto px-4 md:px-6 max-w-7xl">

		{% if fields.title or fields.subtitle %}
			{% include 'components/section-header.twig' with { title: fields.title, text: fields.subtitle } %}
		{% endif %}

		{% if fields.contact_items %}
			{% set items = fields.contact_items %}
			{% set count = items|length %}

			{% set colsSm = count == 1 ? 'sm:grid-cols-1' : 'sm:grid-cols-2' %}
			{% set colsLg = count >= 4 ? 'lg:grid-cols-4' : (count == 3 ? 'lg:grid-cols-3' : 'lg:grid-cols-2') %}

			<div class="grid grid-cols-1 {{ colsSm }} {{ colsLg }} gap-6 md:gap-12 mt-12">

				{% for item in items %}
					{% set icon_class = {
						'adresse'  : 'fa-location-dot',
						'telephone': 'fa-phone',
						'email'    : 'fa-envelope',
						'horaire'  : 'fa-clock'
					}[item.type]|default('fa-circle-info') %}

					{% set label = (item.type|default('info'))|capitalize %}
					{% set value = item.value|default('') %}

					{% set link = '' %}
					{% set target = '' %}
					{% set rel = '' %}

					{% if item.type == 'telephone' and value %}
						{% set link   = 'tel:' ~ value %}
					{% elseif item.type == 'email' and value %}
						{% set link   = 'mailto:' ~ value %}
					{% elseif item.type == 'adresse' and value %}
						{% set link   = 'https://maps.google.com/?q=' ~ value|url_encode %}
						{% set target = ' target="_blank"' %}
						{% set rel    = ' rel="noopener noreferrer"' %}
					{% endif %}

					<article class="bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow duration-300 border border-gray-100 overflow-hidden p-6 md:p-8 text-center">
						<div class="flex justify-center mb-4">
							<div class="flex h-12 w-12 items-center justify-center rounded-full bg-gray-100 shadow-sm">
								<i class="fa-solid {{ icon_class }} text-xl text-primary" aria-hidden="true"></i>
							</div>
						</div>

						<h4 class="text-sm font-medium text-gray-600 uppercase tracking-wide mb-3">
							{{ label }}
						</h4>

						{% if value %}
							{% if link %}
								<a href="{{ link }}" {{ target|raw }} {{ rel|raw }} class="block text-base md:text-lg text-gray-900 font-medium hover:text-primary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 transition-colors" aria-label="{{ label }}: {{ value }}">
									{{ value }}
								</a>
							{% else %}
								<p class="text-base md:text-lg text-gray-900 font-medium">
									{{ value }}
								</p>
							{% endif %}
						{% endif %}
					</article>

				{% endfor %}
			</div>
		{% endif %}
	</div>
</section>
