<section class="contact-form py-16 md:py-24 px-4">
	<div class="container mx-auto px-4 md:px-6 max-w-7xl">
		<article class="max-w-2xl mx-auto bg-gradient-to-br from-white via-gray-100 to-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-300 border border-gray-100 overflow-hidden p-8 md:p-12">
			<div class="text-center mb-12">
				{% if fields.title %}
					<h2 class="text-3xl md:text-4xl font-bold tracking-tight mb-8 text-gray-900">
						{{ fields.title }}
					</h2>
				{% endif %}
				{% if fields.subtitle %}
					<p class="text-base md:text-lg text-gray-600 leading-relaxed">
						{{ fields.subtitle }}
					</p>
				{% endif %}
			</div>
			<form id="custom-contact-form" class="space-y-4" novalidate aria-label="Formulaire de contact">
				<input type="hidden" name="action" value="send_contact_form">
				<input type="hidden" name="_wpnonce" value="{{ function('wp_create_nonce', 'wp_rest') }}">

				{% if fields.form_fields %}
					{% for field in fields.form_fields %}
						<fieldset class="space-y-2">
							<label for="field_{{ loop.index }}" class="block text-base font-medium text-gray-700">
								{{ field.label }}
								<span class="text-red-500" aria-label="champ obligatoire">*</span>
							</label>

							{% set field_name = 'field_' ~ loop.index ~ '_' ~ function('sanitize_title', field.label) %}
							{% set field_id = 'field_' ~ loop.index %}

							{% if field.type == 'textarea' %}
								<textarea id="{{ field_id }}" name="{{ field_name }}" rows="4" class="w-full rounded-lg border bg-white/5 border-black/30 px-4 py-3 text-sm focus:border-black focus:outline-none transition-colors" required aria-required="true"></textarea>
							{% else %}
								<input type="{{ field.type }}" id="{{ field_id }}" name="{{ field_name }}" class="w-full rounded-lg border bg-white/5 border-black/30 px-4 py-2 text-sm focus:border-black focus:outline-none transition-colors" required aria-required="true">
							{% endif %}
						</fieldset>
					{% endfor %}

					<!-- Submit Button -->
					<div class="pt-6">
						<button type="submit" class="w-full inline-flex items-center justify-center px-6 py-2 text-base font-medium text-white bg-gray-900 hover:bg-gray-800 rounded-md shadow-sm transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Envoyer le formulaire">
							<span class="btn-text">{{ fields.submit_text|default('Envoyer') }}</span>
							<span class="btn-loading hidden ml-2" aria-hidden="true">
								<i class="fas fa-circle-notch fa-spin"></i>
							</span>
						</button>
					</div>

				{% else %}
					<div class="text-center py-8">
						<p class="text-base text-gray-500 italic">
							Aucun champ configur√©.
						</p>
					</div>
				{% endif %}

				<!-- Form Message -->
				<div id="form-message" class="text-red-600 text-sm text-center hidden" role="alert" aria-live="polite"></div>
			</form>
		</article>
	</div>
</section>
